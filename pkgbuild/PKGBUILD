# Maintainer: Barnab√© di Kartola <barnabedikartola@gmail.com>

pkgname=turing-smart-screen
pkgdesc="Package turing-smart-screen"
depends=('python-pip' 'python-pillow' 'python-pyserial' 'python-yaml' 'python-psutil' 'python-babel' 'python-ruamel-yaml' 'python-sv-ttk' 'python-numpy' 'python-gputil' 'python-pyamdgpuinfo')
# makedepends=('')
# conflicts=('')
pkgver=$(date +%y.%m.%d)
pkgrel=$(date +%H%M)
arch=('any')
license=('GPL3')
url="https://github.com/biglinux/turing-smart-screen"
urlgit="https://github.com/mathoudebine/turing-smart-screen-python"
provides=("$pkgname")
source=("git+${url}.git")
md5sums=('SKIP')

if [ -e "${pkgname}.install" ];then
    install=${pkgname}.install
elif [ -e "pkgbuild.install" ];then
    install=pkgbuild.install
fi

package() {

    # Verify default folder
    if [ -d "${srcdir}/${pkgname}/${pkgname}" ]; then
        InternalDir="${srcdir}/${pkgname}/${pkgname}"
    else
        InternalDir="${srcdir}/${pkgname}"
    fi
    
    if [ -d "${InternalDir}/usr" ]; then
        cp -r "${InternalDir}/usr" "${pkgdir}/"
    fi    

    echo ${InternalDir}
    echo ${srcdir}
    echo ${pkgname}
    echo ${pkgdir}    
    
    cd "$srcdir"

    git clone "$urlgit"
    
    cp -r "${srcdir}/turing-smart-screen-python/." "${pkgdir}/usr/share/turing-smart-screen/"
    rm -r "${srcdir}/turing-smart-screen-python/"
    
    #mkdir -p "${pkgdir}/usr/share/"
    #cp -r "${pkgdir}/usr/share/turing-smart-screen-python" "${InternalDir}/usr/share/turing-smart-screen/"
    #rm -r "${srcdir}/turing-smart-screen-python/"
    #rm -r ${pkgdir}/usr/share/turing-smart-screen/.git
    #rm -r ${pkgdir}/usr/share/turing-smart-screen/.github
    #rm ${pkgdir}/usr/share/turing-smart-screen/.gitignore


    

    
#     cp -r "${srcdir}/turing-smart-screen-python/" "${InternalDir}/usr/share/"    
#     rm -r "${srcdir}/turing-smart-screen-python/"
    

}
